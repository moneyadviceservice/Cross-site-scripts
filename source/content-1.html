<!DOCTYPE html>
<html>
	<head>
		<title>Content 1</title>
		<script src="widget.js"></script>
		<script src="tool_syndication.js"></script>
		<script src="tools.js"></script>
	</head>

	<body>
		<script type="text/javascript">
			// console.log('document: ', document); 

			var widget = new window.PartnerMAS.Widget(document); 

			console.log('widget: ', widget); 
			console.log('masConfig: ', masConfig); 

			// widget.renderIFrame(); 

			var href = 'https://bdedaa666f42.ngrok.io/source/content-1.html', 
					link = '<a href="#" onclick="window.open(\'' + href + '\')">Click to go directly to the tool</a>', 
					// button = '<button id="requestAccessBtn">Request Access</button>', 
					page = 
						'<h1>Content page 1</h1>' + 
						'<p>This page is designed to include some content that can be embedded in the test page.</p>' +
						'<form action="content-2">' + 
							'<input type="text"/>' + 
							'<button>Submit</button>' + 
						'</form>';

	    console.log('Determining if the `hasStorageAccess` method of the Storage Access API is known to this browser ...'); 

	    if (document.hasStorageAccess === undefined) {
	      console.log('`hasStorageAccess` IS NOT known to this browser!'); 

	      // document.write(page); 
	      document.src = href; 
	    } else {
	      console.log('hasStorageAccess IS known to this browser!'); 

	      document.hasStorageAccess().then(
	        hasAccess => {
	          console.log('Determining if we have access to Storage/Cookies ...'); 

	          if (hasAccess) {
	            console.log('We DO have access to Storage/Cookies!');

				      document.write(page); 
	          } else {
	            console.log('We DO NOT have access to Storage/Cookies!'); 

				      // document.write(button);
				      document.write(link);
	          }
	        }
	      ).catch(e => {
	        console.log('Could not determine if we have access!'); 
	        console.log(e); 
	      })
	    }

	    // var requestAccess = function() {
	    //   console.log('Requesting access to Storage/Cookies ...'); 

	    //   document.requestStorageAccess().then(
	    //     function successful() {
	    //       console.log('We have been granted access to Storage/Cookies!'); 

			  //     document.getElementById('requestAccessBtn').parentNode.innerHTML = page; 
	    //     }, 
	    //     function fail() {
	    //       console.log('We have NOT been granted access to Storage/Cookies!'); 
	    //     }
	    //   ).catch(e => {
	    //     console.log('Some kinda shit went on!'); 
	    //     console.log(e); 
	    //   }); 
	    // }
		</script>
	</body>
</html>
